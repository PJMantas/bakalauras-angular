<div class="container card">
    <h3 class="card-header bg-dark text-light"> Redaguokite savo profilį</h3>
    <form class="card-body" [formGroup]="editUserForm" (ngSubmit)="onSubmit()">

        

        <div class="form-group">
            <label for="email">E. Paštas</label>
            <input [readonly]="true" type="text" formControlName="email" class="form-control" />
        </div>
        
        <div class="form-group">
            <label for="username">Slapyvardis</label>
            <input [readonly]="true" type="text" formControlName="username" class="form-control" />
        </div>

        <div class="form-group">

            <label for="first_name">Vardas</label>
            <input type="text" formControlName="first_name" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['first_name'].errors }" />
            <div *ngIf="submitted && f['first_name'].errors" class="invalid-feedback">
                <div *ngIf="f['first_name'].errors['required']">Vardas yra privalomas</div>
            </div>
        </div>

        <div class="form-group">
            <label for="last_name">Pavardė</label>
            <input type="text" formControlName="last_name" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['last_name'].errors }" />
            <div *ngIf="submitted && f['last_name'].errors" class="invalid-feedback">
                <div *ngIf="f['last_name'].errors['required']">Pavardė yra privaloma</div>
            </div>
        </div>

        <div class="form-group">
            <label for="age">Amžius</label>
            <input type="text" formControlName="age" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['age'].errors }" />
            <div *ngIf="submitted && f['age'].errors" class="invalid-feedback">
                <div *ngIf="f['age'].errors['required']">Amžius yra privalomas</div>
            </div>
        </div>

        <div class="form-group">
            <label for="country">Šalis</label>
            <input type="text" formControlName="country" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['country'].errors }" />
            <div *ngIf="submitted && f['country'].errors" class="invalid-feedback">
                <div *ngIf="f['country'].errors['required']">Šalis yra privaloma</div>
            </div>
        </div>

        <div class="form-group">
            <label for="city">Miestas</label>
            <input type="text" formControlName="city" class="form-control" [ngClass]="{ 'is-invalid': submitted && f['city'].errors }" />
            <div *ngIf="submitted && f['city'].errors" class="invalid-feedback">
                <div *ngIf="f['city'].errors['required']">Miestas yra privalomas</div>
            </div>
        </div>
        <br>
        <div class="form-group">
            <label for="avatar_url">Profilio nuotrauka</label>
            <br>
            <br>
            <img src= '{{enviroment}}/{{profileImage}}' style="max-width: 50vh; max-height: 30vh; border-radius: 10px; outline: auto;" class="img-fluid" >
            <br>
            <br>
            <input formControlName="avatar_url" type="file" accept=".jpg,.gif,.jpeg,.png" id="avatar_url" class="form-control" (change)="onFileChange($event)">
          </div>
        
        <br>
        <button class="btn btn-success btn-xs " type="submit"><i class="bi bi-check-lg"></i> Atnaujinti</button>
        <button class="btn btn-dark btn-xs " type="button" [routerLink]="['/profile']"><i class="bi bi-arrow-return-left"></i> Grįžti</button>
        
        <div *ngIf="error?.first_name" class="alert alert-danger mt-3">
            {{ error?.first_name }}
          </div>
          <div *ngIf="error?.last_name" class="alert alert-danger mt-3">
            {{ error?.last_name }}
          </div>
          <div *ngIf="error?.age" class="alert alert-danger mt-3">
            {{ error?.age }}
          </div>
          <div *ngIf="error?.country" class="alert alert-danger mt-3">
            {{ error?.country }}
          </div>
          <div *ngIf="error?.city" class="alert alert-danger mt-3">
            {{ error?.city }}
          </div>
          <div *ngIf="error?.group_id" class="alert alert-danger mt-3">
            {{ error?.group_id }}
          </div>
    </form>
</div> 